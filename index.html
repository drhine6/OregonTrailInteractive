<!DOCTYPE html>
<html>
  <head>
    <meta
      name="robots"
      content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
    />
    <link
      rel="alternate"
      hreflang="en"
      href="https://www.crisisgroup.org/visual-explainers/10-conflicts-2023"
    />
    <link
      rel="icon"
      type="image/x-icon"
      href="https://www.crisisgroup.org/visual-explainers/10-conflicts-2023/images/favicon.ico"
    />

    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="[Visual] 10 Conflicts to Watch in 2023 | International Crisis Group"
    />
    <meta
      name="twitter:description"
      content="The war in Ukraine has roiled Europe and shaken up the global economy. Its ripple effects will continue to be felt around the globe. Meanwhile, other crises loom. These are International Crisis Group’s 10 Conflicts to Watch in 2023."
    />
    <meta name="twitter:site" content="@crisisgroup" />
    <meta
      name="twitter:image"
      content="https://www.crisisgroup.org/visual-explainers/10-conflicts-2023/images/10CTW2023_twitter.jpg"
    />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta
      property="og:title"
      content="[Visual] 10 Conflicts to Watch in 2023 | International Crisis Group"
    />
    <meta
      property="og:description"
      content="The war in Ukraine has roiled Europe and shaken up the global economy. Its ripple effects will continue to be felt around the globe. Meanwhile, other crises loom. These are International Crisis Group’s 10 Conflicts to Watch in 2023."
    />
    <meta
      property="og:url"
      content="https://www.crisisgroup.org/visual-explainers/10-conflicts-2023"
    />
    <meta property="og:site_name" content="International Crisis Group" />
    <meta
      property="article:publisher"
      content="https://www.facebook.com/crisisgroup"
    />
    <meta
      property="og:image"
      content="https://www.crisisgroup.org/visual-explainers/10-conflicts-2023/images/10CTW2023_facebook.jpg"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <meta charset="utf-8" />
    <title>Oregon Trail</title>
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <meta
      name="description"
      content="Russia’s invasion of Ukraine sent shock waves round the world, and several other crises loom as well. Here are the 10 Conflicts to Watch in 2023"
    />
    <meta name="author" content="International Crisis Group" />
    <meta
      property="article:published_time"
      content="2022-06-10T07:00:00+00:00"
    />
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css"
      rel="stylesheet"
    />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js"></script>
    <script src="https://unpkg.com/intersection-observer@0.12.0/intersection-observer.js"></script>
    <script src="https://unpkg.com/scrollama"></script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="https://use.typekit.net/kqj3chj.css" />
    <link href="css/style.css" rel="stylesheet" />
    <link href="css/cookies.css" rel="stylesheet" />

    <script>
      // When the user scrolls the page, execute myFunction
      window.onscroll = function () {
        myFunction();
      };

      function myFunction() {
        var winScroll =
          document.body.scrollTop || document.documentElement.scrollTop;
        var height =
          document.documentElement.scrollHeight -
          document.documentElement.clientHeight;
        var scrolled = (winScroll / height) * 100;
        document.getElementById("myBar").style.width = scrolled + "%";
      }

      $(document).ready(function () {
        $("a#freeExplore").click(function (event) {
          event.preventDefault();
          $("html, body").animate(
            {
              scrollTop: $($(this).attr("href")).offset().top - 200,
            },
            1000
          );
        });
      });

      $(document).ready(function () {
        $("a.anchorLink").click(function (event) {
          event.preventDefault();
          $("html, body").animate(
            {
              scrollTop: $($(this).attr("href")).offset().top - 200,
            },
            3000
          );
        });
      });
    </script>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-6XT7HNCRW0"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-3PVTVE245X");
    </script>
  </head>
  <body>
    <div class="progress-container">
      <div class="progress-bar" id="myBar"></div>
    </div>

    <div id="map"></div>

    <div id="ukrlegend" class="legend blackshadow left-legend">
      <h4>
        In March 2022, a Ukrainian missile strike sunk a Russian military ship
        at the port of Berdansk, east of Mariupol.
      </h4>
      <h5>
        <strong>Data</strong>:
        <a href="https://apps.sentinel-hub.com/eo-browser" target="_blank"
          >ESA | Sentinel Hub</a
        >
      </h5>
    </div>

    <div id="nklegend" class="legend blackshadow right-legend">
      <h4>The Front Lines</h4>
      <ul class="legend-ul">
        <li>
          <div>
            <span
              style="background-color: #a4353b; border: solid 1px #fff"
            ></span
            >Former adjacent territories
          </div>
        </li>
        <li>
          <div>
            <span style="background-color: #fff; border: solid 1px #fff"></span
            >Territory of Nagorno-Karabakh (Former NKAO), Patrolled by Russian
            Peacekeepers
          </div>
        </li>
        <li>
          <div>
            <span
              style="background-color: #f0decf; border: solid 1px #fff"
            ></span
            >Territory of Nagorno-Karabakh (Former NKAO), Patrolled by
            Azerbaijani Peacekeepers
          </div>
        </li>
        <li>
          <div>
            <span
              style="background-color: #083c4f; border: solid 1px #fff"
            ></span
            >Lachin Corridor
          </div>
        </li>
      </ul>
      <br />
      <h5>
        <strong>Data</strong>:
        <a
          href="https://www.crisisgroup.org/content/nagorno-karabakh-conflict-visual-explainer"
          target="_blank"
          >Crisis Group | ECA Program</a
        >
      </h5>
    </div>

    <div id="malilegend" class="legend blackshadow left-legend">
      <h4>
        The star-shaped formation in this satellite image is a former French
        military base in Ménaka, Mali.
      </h4>
      <h5>
        <strong>Data</strong>:
        <a href="https://apps.sentinel-hub.com/eo-browser" target="_blank"
          >ESA | Sentinel Hub</a
        >
      </h5>
    </div>

    <div id="haitilegend" class="legend blackshadow right-legend">
      <h4>
        Cité Soleil, a Port-au-Prince commune in Port-Au-Prince. It is generally
        regarded as one of the poorest and most dangerous areas of the Western
        Hemisphere.
      </h4>
      <!--<h5><strong>Data</strong>: <a href='https://apps.sentinel-hub.com/eo-browser' target='_blank'>ESA | Sentinel Hub</a></h5>-->
    </div>

    <div id="twlegend" class="legend blackshadow right-legend">
      <h4>Sites of Chinese Military Exercises in 2022</h4>
      <ul class="legend-ul">
        <li>
          <div>
            <span
              style="background-color: #e87722; border: solid 1px #fff"
            ></span
            >Military Exercise
          </div>
        </li>
      </ul>
      <br />
      <h5>
        <strong>Data</strong>:
        <a
          href="https://chinapower.csis.org/tracking-the-fourth-taiwan-strait-crisis/"
          target="_blank"
          >CSIS | ChinaPower Project</a
        >
      </h5>
    </div>

    <div id="mapInset"></div>

    <div id="loader">
      <div id="loaderSpin"></div>
    </div>

    <div id="story"></div>

    <script src="./config.js"></script>
    <script src="./chapters.js"></script>
    <script src="./access.js"></script>
    <script>
      var initLoad = true;
      var layerTypes = {
        fill: ["fill-opacity"],
        line: ["line-opacity"],
        circle: ["circle-opacity", "circle-stroke-opacity"],
        symbol: ["icon-opacity", "text-opacity"],
        raster: ["raster-opacity"],
        "fill-extrusion": ["fill-extrusion-opacity"],
        heatmap: ["heatmap-opacity"],
      };

      var alignments = {
        left: "lefty",
        center: "centered",
        right: "righty",
        full: "fully",
      };

      function getLayerPaintType(layer) {
        console.log(layer);
        var layerType = map.getLayer(layer).type;
        return layerTypes[layerType];
      }

      function setLayerOpacity(layer) {
        var paintProps = getLayerPaintType(layer.layer);
        paintProps.forEach(function (prop) {
          var options = {};
          if (layer.duration) {
            var transitionProp = prop + "-transition";
            options = { duration: layer.duration };
            map.setPaintProperty(layer.layer, transitionProp, options);
          }
          map.setPaintProperty(layer.layer, prop, layer.opacity, options);
        });
      }

      var story = document.getElementById("story");
      var features = document.createElement("div");
      features.setAttribute("id", "features");

      var header = document.createElement("div");

      if (config.title) {
        var titleText = document.createElement("div");
        titleText.innerHTML = config.title;
        header.appendChild(titleText);
      }

      if (config.subtitle) {
        var subtitleText = document.createElement("h2");
        subtitleText.innerText = config.subtitle;
        header.appendChild(subtitleText);
      }

      if (config.byline) {
        var bylineText = document.createElement("p");
        bylineText.innerText = config.byline;
        header.appendChild(bylineText);
      }

      if (header.innerText.length > 0) {
        header.classList.add(config.theme);
        header.setAttribute("id", "header");
        story.appendChild(header);
      }

      chapters.forEach((record, idx) => {
        var container = document.createElement("div");
        var chapter = document.createElement("div");

        if (record.title) {
          var title = document.createElement("h3");
          title.innerText = record.title;
          chapter.appendChild(title);
        }

        if (record.image) {
          var image = new Image();
          image.src = record.image;
          chapter.appendChild(image);
        }

        if (record.description) {
          var story = document.createElement("p");
          story.innerHTML = record.description;
          chapter.appendChild(story);
        }

        container.setAttribute("id", record.id);
        container.classList.add("step");
        if (idx === 0) {
          container.classList.add("active");
        }

        chapter.classList.add(config.theme);
        container.appendChild(chapter);
        container.classList.add(alignments[record.alignment] || "centered");
        if (record.hidden) {
          container.classList.add("hidden");
        }
        features.appendChild(container);
      });

      story.appendChild(features);

      var footer = document.createElement("div");

      // add prefix content for mobile view
      if (config.mobileview) {
        var mobileText = document.createElement("p");
        mobileText.innerHTML = config.mobileview;
        header.appendChild(mobileText);
      }

      if (config.footer) {
        var footerText = document.createElement("p");
        footerText.innerHTML = config.footer;
        footer.appendChild(footerText);
      }

      if (footer.innerText.length > 0) {
        footer.classList.add(config.theme);
        footer.setAttribute("id", "footer");
        story.appendChild(footer);
      }

      mapboxgl.accessToken = access.token;

      const transformRequest = (url) => {
        const hasQuery = url.indexOf("?") !== -1;
        const suffix = hasQuery
          ? "&pluginName=scrollytellingV2"
          : "?pluginName=scrollytellingV2";
        return {
          url: url + suffix,
        };
      };

      var map = new mapboxgl.Map({
        container: "map",
        style: config.style,
        center: chapters[0].location.center,
        zoom: chapters[0].location.zoom,
        bearing: chapters[0].location.bearing,
        pitch: chapters[0].location.pitch,
        interactive: false,
        transformRequest: transformRequest,
        projection: config.projection,
      });

      // Create a inset map if enabled in config.js
      if (config.inset) {
        var insetMap = new mapboxgl.Map({
          container: "mapInset", // container id
          style: "mapbox://styles/mapbox/dark-v10", //hosted style id
          center: chapters[0].location.center,
          // Hardcode above center value if you want insetMap to be static.
          zoom: 3, // starting zoom
          hash: false,
          interactive: false,
          projection: "globe",
          attributionControl: false,
        });
      }

      if (config.showMarkers) {
        var marker = new mapboxgl.Marker({ color: config.markerColor });
        marker.setLngLat(chapters[0].location.center).addTo(map);
      }

      // instantiate the scrollama
      var scroller = scrollama();

      function roadDraw() {
        let startTime;
        const duration = 10000;

        const frame = (time) => {
          if (!startTime) startTime = time;
          const animationPhase = (time - startTime) / duration;

          // Reduce the visible length of the line by using a line-gradient to cutoff the line
          // animationPhase is a value between 0 and 1 that reprents the progress of the animation
          map.setPaintProperty("road-draw-line", "line-gradient", [
            "step",
            ["line-progress"],
            "red",
            animationPhase,
            "rgba(0, 0, 0, 0)",
          ]);

          if (animationPhase > 1) {
            return;
          }
          window.requestAnimationFrame(frame);
        };

        window.requestAnimationFrame(frame);
      }

      map.on("load", function () {
        console.log("loaded");
        removeLoader();
        if (config.use3dTerrain) {
          map.addSource("mapbox-dem", {
            type: "raster-dem",
            url: "mapbox://mapbox.mapbox-terrain-dem-v1",
            tileSize: 512,
            maxzoom: 14,
          });
          // add the DEM source as a terrain layer with exaggerated height
          map.setTerrain({ source: "mapbox-dem", exaggeration: 1.5 });

          // add a sky layer that will show when the map is highly pitched
        }

        // As the map moves, grab and update bounds in inset map.
        if (config.inset) {
          map.on("move", getInsetBounds);
        }
        // setup the instance, pass callback functions
        scroller
          .setup({
            step: ".step",
            offset: 0.5,
            progress: true,
          })

          .onStepEnter(async (response) => {
            var chapter = chapters.find(
              (chap) => chap.id === response.element.id
            );
            var chapterid = chapter.id;

            if (chapterid == "UKR") {
              $("#ukrlegend").show("slow");
            } else $("#ukrlegend").hide("fast");

            if (chapterid == "NK") {
              $("#nklegend").show("slow");
            } else $("#nklegend").hide("fast");

            if (chapterid == "SAH") {
              $("#malilegend").show("slow");
            } else $("#malilegend").hide("fast");

            if (chapterid == "HT") {
              $("#haitilegend").show("slow");
            } else $("#haitilegend").hide("fast");

            if (chapterid == "TW") {
              $("#twlegend").show("slow");
            } else $("#twlegend").hide("fast");

            response.element.classList.add("active");

            if (chapter.id === "NARRATIVE-1") {
              response.element.classList.add("active-solid");
            }

            if (chapter.id === "letter-0" || chapter.id === "prelude-1") {
              document.getElementById("loader").style.opacity = 0;
            } else {
              document.getElementById("loader").style.opacity = 0;
            }
            map[chapter.mapAnimation || "flyTo"](chapter.location);
            // Incase you do not want to have a dynamic inset map,
            // rather want to keep it a static view but still change the
            // bbox as main map move: comment out the below if section.
            if (config.inset) {
              if (chapter.location.zoom < 5) {
                insetMap.flyTo({ center: chapter.location.center, zoom: 0 });
              } else {
                insetMap.flyTo({ center: chapter.location.center, zoom: 3 });
              }
            }
            if (chapter.id === null) {
              document.getElementById("mapInset").style.opacity = 0;
            }
            if (config.showMarkers) {
              marker.setLngLat(chapter.location.center);
            }
            if (chapter.onChapterEnter.length > 0) {
              chapter.onChapterEnter.forEach(setLayerOpacity);
            }
            if (chapter.callback) {
              window[chapter.callback]();
            }
            if (chapter.location.bbox) {
              {
                map.fitBounds(chapter.location.bbox, {
                  padding: { top: 10, bottom: 25, left: 15, right: 5 },
                });
              }
            }
            if (chapter.rotateAnimation) {
              map.once("moveend", () => {
                const center = map.getCenter();
                const newCenter = [center.lng + 360, center.lat];
                map.easeTo({
                  center: newCenter,
                  duration: 45000,
                  easing: (n) => n,
                });
              });
            }
          })
          .onStepExit((response) => {
            var chapter = chapters.find(
              (chap) => chap.id === response.element.id
            );
            response.element.classList.remove("active");
            if (chapter.onChapterExit.length > 0) {
              chapter.onChapterExit.forEach(setLayerOpacity);
            }
          });
      });

      //Helper functions for insetmap
      function getInsetBounds() {
        let bounds = map.getBounds();

        let boundsJson = {
          type: "FeatureCollection",
          features: [
            {
              type: "Feature",
              properties: {},
              geometry: {
                type: "Polygon",
                coordinates: [
                  [
                    [bounds._sw.lng, bounds._sw.lat],
                    [bounds._ne.lng, bounds._sw.lat],
                    [bounds._ne.lng, bounds._ne.lat],
                    [bounds._sw.lng, bounds._ne.lat],
                    [bounds._sw.lng, bounds._sw.lat],
                  ],
                ],
              },
            },
          ],
        };

        if (initLoad) {
          addInsetLayer(boundsJson);
          initLoad = false;
        } else {
          updateInsetLayer(boundsJson);
        }
      }

      function addInsetLayer(bounds) {
        insetMap.addSource("boundsSource", {
          type: "geojson",
          data: bounds,
        });

        insetMap.addLayer({
          id: "boundsLayer",
          type: "fill",
          source: "boundsSource", // reference the data source
          layout: {},
          paint: {
            "fill-color": "#fff", // blue color fill
            "fill-opacity": 0.2,
          },
        });
        // // Add a black outline around the polygon.
        insetMap.addLayer({
          id: "outlineLayer",
          type: "line",
          source: "boundsSource",
          layout: {},
          paint: {
            "line-color": "#000",
            "line-width": 1,
          },
        });
      }

      function updateInsetLayer(bounds) {
        insetMap.getSource("boundsSource").setData(bounds);
      }

      // Setup free freeExplore

      function disableFreetime() {
        let windowWidth = window.innerWidth;
        if (windowWidth >= 1020) {
          document.getElementById("map").style["z-index"] = -5;
          if (map.hasControl(nav)) {
            map.removeControl(nav);
            map.dragPan.disable();
          }
        }
      }

      // Setup traditional map rotation for data views

      function rotateData() {
        map.once("moveend", () => {
          const rotateNumber = map.getBearing();
          map.rotateTo(rotateNumber + 180, {
            duration: 50000,
            easing: function (t) {
              return t;
            },
          });
        });
      }

      // Regular map rotateAnimation

      // Setup preloader animations

      function customizeChapters(chap) {
        if (chap === "letter-0") {
          map.on("render", removeLoader);
        } else {
          map.off("render", removeLoader);
        }
      }

      function removeLoader() {
        document.getElementById("loader").style.opacity = 0;
        document.getElementById("loaderSpin").style.opacity = 0;
      }

      // setup resize event
      window.addEventListener("resize", scroller.resize);

      var nav = new mapboxgl.NavigationControl({ visualizePitch: true });
      function enableFreetime() {
        let windowWidth = window.innerWidth;
        if (windowWidth >= 1020) {
          document.getElementById("map").style["z-index"] = 0;
          document.getElementById("map").style["cursor"] = "grab";
          map.addControl(nav, "top-right");
          map.dragPan.enable();
        }
      }

      // GDPR box behavior

      $(document).ready(function () {
        $("#cn-accept-cookie").click(function () {
          $("#cookie-notice").hide("slow");
        });
        $("#cn-close-notice").click(function () {
          $("#cookie-notice").hide("slow");
        });
      });

      // Red alert dots

      const size = 150;

      // This implements `StyleImageInterface`
      // to draw a pulsing dot icon on the map.
      const pulsingDot = {
        width: size,
        height: size,
        data: new Uint8Array(size * size * 4),

        // When the layer is added to the map,
        // get the rendering context for the map canvas.
        onAdd: function () {
          const canvas = document.createElement("canvas");
          canvas.width = this.width;
          canvas.height = this.height;
          this.context = canvas.getContext("2d");
        },

        // Call once before every frame where the icon will be used.
        render: function () {
          const duration = 1000;
          const t = (performance.now() % duration) / duration;

          const radius = (size / 2) * 0.3;
          const outerRadius = (size / 2) * 0.7 * t + radius;
          const context = this.context;

          // Draw the outer circle.
          context.clearRect(0, 0, this.width, this.height);
          context.beginPath();
          context.arc(
            this.width / 2,
            this.height / 2,
            outerRadius,
            0,
            Math.PI * 2
          );
          context.fillStyle = `rgba(255, 200, 200, ${1 - t})`;
          context.fill();

          // Draw the inner circle.
          context.beginPath();
          context.arc(this.width / 2, this.height / 2, radius, 0, Math.PI * 2);
          context.fillStyle = "rgba(232, 119, 34, 1)";
          context.strokeStyle = "rgba(243, 181, 133, 1)";
          context.lineWidth = 2 + 4 * (1 - t);
          context.fill();
          context.stroke();

          // Update this image's data with data from the canvas.
          this.data = context.getImageData(0, 0, this.width, this.height).data;

          // Continuously repaint the map, resulting
          // in the smooth animation of the dot.
          map.triggerRepaint();

          // Return `true` to let the map know that the image was updated.
          return true;
        },
      };

      map.on("load", () => {
        map.addImage("pulsing-dot", pulsingDot, {
          pixelRatio: 2,
        });
        var data = {
          type: "FeatureCollection",
        };
        data.features = chapters.map((chapter) => {
          return {
            type: "Feature",
            properties: {
              id: chapter.id,
              name: chapter.name,
            },
            geometry: {
              type: "Point",
              coordinates: chapter.location.center,
            },
          };
        });
        console.log(data);
        map.addSource("dot-point", {
          type: "geojson",
          data,
        });
        map.addLayer({
          id: "layer-with-pulsing-dot",
          type: "symbol",
          source: "dot-point",
          layout: {
            "icon-image": "pulsing-dot",
            "icon-allow-overlap": true,
          },
        });
      });

      map.on("load", () => {
        map.addSource("trail-line", {
          type: "geojson",
          data: "./trailLine.geojson",
        });

        map.addLayer({
          type: "line",
          source: "trail-line",
          id: "line",
          paint: {
            "line-color": "red",
            "line-width": 14,
            // 'line-gradient' must be specified using an expression
            // with the special 'line-progress' property
            "line-gradient": [
              "interpolate",
              ["linear"],
              ["line-progress"],
              0,
              "blue",
              0.1,
              "royalblue",
              0.3,
              "cyan",
              0.5,
              "lime",
              0.7,
              "yellow",
              1,
              "red",
            ],
          },
          layout: {
            "line-cap": "round",
            "line-join": "round",
          },
        });
      });
    </script>
  </body>
</html>
